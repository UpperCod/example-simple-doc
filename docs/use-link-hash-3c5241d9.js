import{T,O}from"./core-435a3994.js";function useLinkHash({selector:e,root:t,ref:r,moveWithScroll:o}){let[l,n]=T();return O(()=>{let l="string"==typeof t?document.querySelector(t):t,s=[...("string"==typeof e?(l==window?document:l).querySelector(e):e).querySelectorAll("h1,h2,h3")],i=new IntersectionObserver(([e])=>{n(t=>({...t,titles:a.map(t=>({...t,intercepted:e.isIntersecting&&1==e.intersectionRatio&&t.target==e.target}))}))},{root:l==window?null:l,rootMargin:"50px 0px -80%",threshold:1}),a=s.map(e=>(i.observe(e),{level:Number(e.localName.replace("h",""))-1,target:e})),c=Math.min(...a.map(({level:e})=>e));if(a=a.map(({target:e,level:t})=>({level:t-c,target:e})),o){let{current:e}=r,t=0;for(;e&&"offsetTop"in e;)t+=e.offsetTop,e=e.parentNode;l.addEventListener("scroll",()=>{let e=(l.scrollY||l.scrollTop)-t;n(t=>({...t,y:e>0?e:0}))})}n({titles:a,scroller:l})},[e,t]),l}export{useLinkHash as u};
